(function(e){if(typeof module!=="undefined"&&module&&module.exports){module.exports=e()}else if(typeof define==="function"&&define.amd){define(e)}else{P=e()}})(function(){"use strict";var e=r,t=a(),n,i=null;function r(e){if(!e.stack){try{throw e}catch(t){}}return e}if((new Error).stack){e=function(e){return e}}function u(){var t=e(new Error).stack;if(!t){return null}var n=[l(t,1)];if(i){n=n.concat(i);if(n.length===128){n.pop()}}return n}function o(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e)||/at ([^ ]+):(\d+):(?:\d+)$/.exec(e)||/@(.+):(\d+):(?:\d+)$/.exec(e);return t?{fileName:t[1],lineNumber:Number(t[2])}:null}function a(){var t=e(new Error).stack;if(!t){return 0}var i=t.split("\n");var r=i[0].indexOf("@")>0?i[1]:i[2];var u=o(r);if(!u){return 0}n=u.fileName;return u.lineNumber}function l(e,t){var n=e.split("\n");var i=[];for(var r=t|0,u=n.length;r<u;++r){var o=n[r];if(o&&!f(o)&&!s(o)){i.push(o)}}return i.join("\n")}function f(e){return e.indexOf("(module.js:")!==-1||e.indexOf("(node.js:")!==-1}function s(e){var i=o(e);return!!i&&i.fileName===n&&i.lineNumber>=t&&i.lineNumber<=dt}var c="\nFrom previous event:\n";function p(t){if(t instanceof Error){var n=t.stack;if(!n){n=e(t).stack}else if(~n.indexOf(c)){return}if(n){t.stack=[l(n,0)].concat(i||[]).join(c)}}}var v=O(typeof process)&&process!=null&&{}.toString.call(process)==="[object process]",h=typeof setImmediate==="function",_=O(typeof MutationObserver)&&MutationObserver||O(typeof WebKitMutationObserver)&&WebKitMutationObserver,d=new N,m=d,y=false,b=0,g=v?A:_?$(I):K(I),w=[],x=K(E),k,j,S=O.call,T=O.apply;m.next=d;function N(){this.f=null;this.a=null;this.b=null;this.next=null}function O(e){return e==="object"||e==="function"}function E(){if(w.length){throw w.shift()}}function I(){while(d!==m){var e=d=d.next;if(b>=1024){m.next=m.next.next}else{++b}var t=e.f;var n=e.a;var r=e.b;e.f=null;e.a=null;e.b=null;t(n,r)}y=false;i=null}function M(e,t,n){var i=m.next;if(i===d){m.next=i=new N;i.next=d}else{--b}m=i;i.f=e;i.a=t;i.b=n;if(!y){y=true;g()}}function A(){var e=process.domain;if(e){if(!j)j=(1,require)("domain");j.active=process.domain=null}if(y&&h){setImmediate(I)}else{process.nextTick(I)}if(e){j.active=process.domain=e}}function $(e){var t=1;var n=document.createTextNode("");var i=new _(e);i.observe(n,{characterData:true});return function(){t=-t;n.data=t}}function K(e){return function(){var t=setTimeout(i,0);var n=setInterval(i,50);function i(){clearTimeout(t);clearInterval(n);e()}}}if(v){k=function(e){i=null;g();throw e}}else{k=function(e){w.push(e);x()}}var W=1;var q=2;var D=-1;var F=-2;var P=-3;var Y=-4;var z=C(void 0);function B(e){if(C.onerror){(1,C.onerror)(e)}else{throw e}}function C(e){return e instanceof ot?e:L(new ot,e)}C.longStackSupport=false;function G(e,t){if(e._state>0){return}e._state=W;e._value=t;e._domain=null;X(e)}function H(e,t){if(e._state>0){return}if(i){p(t)}e._state=q;e._value=t;if(v){e._domain=process.domain}if(e._op===Y){k(t)}else{X(e)}}function J(e,t){if(t._state>0){return}t._state=e._state;t._value=e._value;t._domain=e._domain;X(t)}function L(e,t){if(e._state>0){return e}if(t instanceof ot){Q(e,t)}else{var n=typeof t;if(n==="object"&&t!==null||n==="function"){R(e,t)}else{G(e,t)}}return e}function Q(e,t){if(t===e){H(e,new TypeError("You can't resolve a promise with itself"))}else if(t._state>0){J(t,e)}else{et(t,F,e)}}function R(e,t){var n=U(e,t);if(typeof n==="function"){V(it(e,false),n,t)}else{G(e,t)}}function U(e,t){try{return t.then}catch(n){H(e,n);return null}}function V(e,t,n){try{S.call(t,n,e.resolve,e.reject)}catch(i){e.reject(i)}}function X(e){if(e._pending!==null){Z(e,e._op,e._pending);e._pending=null}}function Z(e,t,n){if(t>=0){n._cb(e,t)}else if(t===D){n(e)}else if(t===F){M(tt,e,n)}else{for(var i=0,r=n.length;i<r;i+=2){Z(e,n[i],n[i+1])}}}function et(e,t,n){if(e._state>0){Z(e,t,n)}else if(e._pending===null){e._pending=n;e._op=t}else if(e._op===P){e._pending.push(t,n)}else{e._pending=[e._op,e._pending,t,n];e._op=P}}function tt(e,t){var n=e._state===W?t._cb:t._eb;t._cb=null;t._eb=null;if(t._trace){i=t._trace;t._trace=null}if(n===null){J(e,t)}else{nt(t,n,e._value,e._domain||t._domain)}}function nt(e,t,n,i){if(i){if(i._disposed)return;i.enter()}try{n=t(n)}catch(r){H(e,r);e=null}if(e)L(e,n);if(i)i.exit()}function it(e,t){var n=C.longStackSupport?u():null;function r(r,u){if(e){var o=e;e=null;if(n){if(i){n=null}else{i=n}}if(r){H(o,t?r:u)}else{L(o,u)}if(n){i=n=null}}}return t?r:{promise:e,resolve:function(e){r(false,e)},reject:function(e){r(true,e)}}}C.defer=rt;function rt(){return it(new ot,false)}C.reject=ut;function ut(e){var t=new ot;H(t,e);return t}function ot(){this._state=0;this._value=void 0;this._domain=null;this._cb=null;this._eb=null;this._op=0;this._pending=null;this._trace=null}ot.prototype.then=function(e,t){var n=new ot;n._cb=typeof e==="function"?e:null;n._eb=typeof t==="function"?t:null;if(C.longStackSupport){n._trace=u()}if(v){n._domain=process.domain}if(this._state>0){M(tt,this,n)}else{et(this,F,n)}return n};ot.prototype.done=function(e,t){var n=this;if(e||t){n=n.then(e,t)}n.then(null,B)._op=Y};ot.prototype.fail=function(e){return this.then(null,e)};ot.prototype.fin=function(e){var t=this;function n(){return e()}return t.then(n,n).then(function(){return t})};ot.prototype.spread=function(e,t){return this.then(st).then(function(t){return T.call(e,void 0,t)},t)};ot.prototype.timeout=function(e,t){var n=new ot;if(this._state>0){J(this,n)}else{var r=false;var o=C.longStackSupport?u():null;var a=setTimeout(function(){r=true;i=o;H(n,new Error(t||"Timed out after "+e+" ms"));i=null},e);et(this,D,function(e){if(!r){M(J,e,n);clearTimeout(a)}})}return n};ot.prototype.delay=function(e){var t=new ot;et(this,D,function(n){if(n._state===W){setTimeout(function(){J(n,t)},e)}else{M(J,n,t)}});return t};ot.prototype.all=function(){return this.then(st)};ot.prototype.allSettled=function(){return this.then(ct)};ot.prototype.inspect=function(){switch(this._state){case W:return{state:"fulfilled",value:this._value};case q:return{state:"rejected",reason:this._value};default:return{state:"pending"}}};ot.prototype.nodeify=function(e){if(e){this.done(function(t){e(null,t)},e);return void 0}else{return this}};function at(e,t){this._value[t]=e.inspect();if(++this._state===0){if(this._pending===null){this._state=W}else{M(G,this,this._value)}}}function lt(e,t){if(this._state<0){if(e._state===q){this._state=0;if(this._pending===null){J(e,this)}else{M(J,e,this)}}else{this._value[t]=e._value;if(++this._state===0){if(this._pending===null){this._state=W}else{M(G,this,this._value)}}}}}var ft=false;C.all=st;function st(e){var t=new ot;t._cb=ft?at:lt;ft=false;var n=e.length|0;t._state=n?-n:W;t._value=new Array(n);for(var i=0;i<n&&t._state<0;++i){et(C(e[i]),i,t)}return t}C.allSettled=ct;function ct(e){ft=true;return st(e)}C.spread=pt;function pt(e,t,n){return st(e).then(function(e){return T.call(t,void 0,e)},n)}C.promised=vt;function vt(e){function t(t){return S.apply(e,t)}return function(){var e=arguments.length;var n=new Array(e+1);n[0]=this;for(var i=0;i<e;++i){n[i+1]=arguments[i]}return st(n).then(t)}}C.denodeify=ht;function ht(e){return function(){var t=new ot;var n=arguments.length;var i=new Array(n+1);i[n]=it(t,true);while(n--){i[n]=arguments[n]}_t(t,e,this,i);return t}}function _t(e,t,n,i){try{T.call(t,n,i)}catch(r){H(e,r)}}C.onerror=null;C.nextTick=function mt(e){z.then(function(){e.call()})._op=Y};var dt=a();return C});